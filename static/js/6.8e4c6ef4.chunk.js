(this["webpackJsonpmachinelearning-tensorflow"]=this["webpackJsonpmachinelearning-tensorflow"]||[]).push([[6],{97:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(2),c=n(27),r=n.n(c),i=n(41),s=n(40),l=n(0),o=n.n(l),u=n(303),j=n(167),b=n(174),f=n(477),d=n(349),p=n(351),h=n(350),x=n(177),m=n(401),O=n.n(m),g=n(78),v=n(75),y=n(345);function w(){var e=Object(l.useState)({}),t=Object(s.a)(e,2),n=t[0],c=t[1],m=Object(l.useState)(null),w=Object(s.a)(m,2),S=w[0],k=w[1],N=Object(l.useState)(),C=Object(s.a)(N,2),F=C[0],z=C[1],I=Object(l.useState)(""),P=Object(s.a)(I,2),_=P[0],E=P[1],L=Object(l.useState)(""),R=Object(s.a)(L,2),B=R[0],J=R[1],T=Object(l.useState)(!1),U=Object(s.a)(T,2),A=U[0],D=U[1],H=o.a.useRef(null),M=Object(y.a)(),V=Object(v.a)(),q="https://tfhub.dev/google/tfjs-model/imagenet/mobilenet_v2_140_224/classification/3/default/1";function G(){return(G=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.e(t,{fromTFHub:!0});case 3:n=e.sent,z(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(l.useEffect)((function(){function e(){return(e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=V.getUserLocale(),e.next=3,V.getLocalizedTextSet(["classifier","classifierdescription","classifierinstructions","moreinfo"],t);case 3:n=e.sent,c(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){u.g().then((function(){!function(e){G.apply(this,arguments)}(q)}))}),[q]);var K=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,X();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(e){var t=u.b.fromPixels(e).toFloat().mul(2/255).add(-1);return u.d.resizeBilinear(t,[224,224],!0).reshape([-1,224,224,3])},W=function(e,t,n){var a=u.j((function(){return e.slice([0,1],[-1,1e3]).softmax().dataSync()})),c=[];return a.forEach((function(e,t){c.push({value:e,index:t})})),c.sort((function(e,t){return t.value-e.value})).filter((function(e,n){return n<t})).map((function(e){var t=e.value,a=e.index;return{className:n[a],probability:t}}))},X=function(){var e=Object(i.a)(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Q(H.current),e.next=3,F.predict(t);case 3:n=e.sent,a=M.getImageNetClasses(),c=W(n,1,a),t.dispose(),n.dispose(),E(c[0].className),J(c[0].probability),D(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){return!A&&_.length>0?Object(a.jsx)(d.a,{className:"card white-bg-color bl-1 bb-1",children:Object(a.jsxs)(h.a,{children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"text-bold",children:"Classification:"})," ",_]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"text-bold",children:"Probability:"})," ",B]})]})}):Object(a.jsx)(a.Fragment,{})},Z=function(e){var t=e.text,n=e.filePath,c=e.display;return Object(a.jsx)(j.a,{className:"ml-2",color:"primary",variant:"outlined",target:"_blank",style:{visibility:c?"visible":"hidden"},onClick:function(){return function(e){window.location.href=window.location.origin+"/"+e}(n)},children:t})};return Object(a.jsx)(x.a,{container:!0,spacing:0,children:Object(a.jsxs)(x.a,{item:!0,xs:12,className:"contentpanel-site",children:[Object(a.jsx)("h3",{children:n.classifier}),Object(a.jsxs)("p",{children:[n.classifierinstructions," ",Object(a.jsx)(j.a,{className:"ml-2",href:q,color:"primary",variant:"outlined",target:"_blank",rel:"noopener",children:"View Model"})]}),Object(a.jsxs)(x.a,{container:!0,spacing:0,children:[Object(a.jsx)(x.a,{item:!0,xs:12,md:6,lg:6,xl:6,children:Object(a.jsxs)(d.a,{className:"card white-bg-color bl-1 bb-1",children:[Object(a.jsxs)(h.a,{children:[Object(a.jsx)("input",{style:{display:"none"},accept:"image/jpeg",multiple:!1,id:"faceImage",type:"file",onChange:function(e){var t=Object(s.a)(e.target.files,1)[0];if(t){var n=new FileReader,a=H.current;a.file=t,n.onload=function(e){a.src=e.target.result},n.readAsDataURL(t),k(t)}}}),Object(a.jsx)(f.a,{title:"Select Image",children:Object(a.jsx)("label",{htmlFor:"faceImage",children:Object(a.jsx)(b.a,{color:"primary","aria-label":"upload image",component:"span",children:Object(a.jsx)(O.a,{fontSize:"large"})})})}),Object(a.jsx)("label",{children:S?S.name:"Select Image"}),". . .",Object(a.jsx)(Z,{display:!1,text:"Bee",filePath:"images/bee.jpg"})]}),Object(a.jsxs)(p.a,{children:[S?Object(a.jsx)(j.a,{color:"primary",onClick:function(){return K()},children:"Perform Classification"}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)(g.a,{display:A,size:40})]})]})}),Object(a.jsxs)(x.a,{item:!0,xs:12,md:6,lg:6,xl:6,children:[Object(a.jsx)(Y,{}),Object(a.jsx)("img",{className:"mt-2",ref:H,src:S,style:{width:"50%",visibility:null!=S?"visible":"hidden"},alt:"Selected file to analyze"})]})]})]})})}}}]);
//# sourceMappingURL=6.8e4c6ef4.chunk.js.map