(this["webpackJsonpmachinelearning-tensorflow"]=this["webpackJsonpmachinelearning-tensorflow"]||[]).push([[3],{100:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n(22),a=n.n(i),o=n(36),r=n(57),s=n(0),u=n(275),l=(n(521),n(520),n(506)),f=n(539),b=n(328),d=n(325),j=n(327),h=n(326),m=n(162),O=n(167),x=n(71);t.default=Object(O.a)()((function(e){var t=Object(s.useState)({}),n=Object(r.a)(t,2),i=n[0],p=n[1],v=Object(s.useState)(""),g=Object(r.a)(v,2),w=g[0],y=g[1],k=Object(s.useState)(),S=Object(r.a)(k,2),C=S[0],D=S[1],M=Object(s.useState)(!1),R=Object(r.a)(M,2),E=R[0],F=R[1],I=Object(s.useState)(!1),T=Object(r.a)(I,2),U=T[0],z=T[1],P=Object(s.useState)(!1),N=Object(r.a)(P,2),J=N[0],L=N[1],W=Object(s.useState)("environment"),q=Object(r.a)(W,2),A=q[0],B=q[1],G=Object(s.useRef)(null),H=Object(s.useRef)(null),K=Object(x.a)();Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K.getUserLocale(),e.next=3,K.getLocalizedTextSet(["objectdetectioncamera","objectdetectiondescriptioncamera","objectdetectioninstructionscamera","moreinfo"],t);case 3:n=e.sent,p(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){u.f().then((function(){y("Model loading..."),V().then((function(){y("Model loaded..."),Q()}))}))}),[]),Object(s.useEffect)((function(){X(C,G.current,J)}),[J]);var Q=function(){if(navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia)return y("Initializing web cam..."),navigator.mediaDevices.getUserMedia({video:{facingMode:A},audio:!1}).then((function(e){return window.stream=e,G.current.srcObject=e,new Promise((function(e){G.current.onloadedmetadata=function(){y('Camera ready...click "Perform Object Detection" to continue'),z(!0),e()}}))}),(function(e){y("Couldn\t start the webcam"),console.error(e)}))},V=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.load();case 3:t=e.sent,D(t),F(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),y("Couldn\t load the model"),F(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),X=function e(t,n,c){c?t.detect(n).then((function(i){Y(i,c),requestAnimationFrame((function(){e(t,n,c)}))}),(function(e){y("Couldn\t start the webcam"),z(!1),console.error(e)})):Y([],c)},Y=function(e,t){var n=H.current.getContext("2d");if(n.clearRect(0,0,n.canvas.width,n.canvas.height),t){var c="20px monospace",i="#00e5ff";n.font=c,n.textBaseline="top",e.forEach((function(e){var t=e.bbox[0],a=e.bbox[1],o=e.bbox[2],r=e.bbox[3];n.strokeStyle=i,n.lineWidth=1,n.strokeRect(t,a,o,r),n.fillStyle=i;var s=n.measureText(e.class).width,u=parseInt(c,10);n.fillRect(t,a,s+10,u+10),n.fillRect(t,a+r-u,s+15,u+10),n.fillStyle="#000000",n.fillText(e.class,t,a),n.fillText(e.score.toFixed(2),t,a+r-u)}))}},Z=function(){L(!0),y("Detecting objects in the webcam...")},$=function(e){return navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(t){t.getTracks().forEach((function(t){e?t.start():t.stop()}))}))},_=function(){return E&&U&&!J?Object(c.jsx)(b.a,{color:"primary",onClick:function(){Z()},children:"Perform Object Detection"}):E&&U&&J?Object(c.jsx)(b.a,{color:"primary",onClick:function(){return L(!1),$(!1),void y("Stopped detecting objects in the webcam...")},children:"Stop Object Detection"}):Object(c.jsx)(c.Fragment,{})},ee=function(){return E&&U&&J?Object(c.jsx)(b.a,{color:"primary",onClick:function(){B("environment"===A?"user":"environment")},children:"Change Camera"}):Object(c.jsx)(c.Fragment,{})},te=function(){return Object(O.b)("md",e.width)?720:window.innerWidth-20},ne=function(){var e=te();return Math.ceil(.75*e)};return Object(c.jsxs)(m.a,{container:!0,spacing:0,children:[Object(c.jsx)(m.a,{item:!0,xs:12,sm:12,md:6,lg:4,xl:4,children:Object(c.jsxs)(d.a,{className:"card white-bg-color bl-1 bb-1",children:[Object(c.jsxs)(h.a,{className:"p-2",children:[Object(c.jsx)("h2",{children:i.objectdetectioncamera}),E||U?Object(c.jsx)(c.Fragment,{}):Object(c.jsx)("p",{children:i.objectdetectioninstructionscamera}),Object(c.jsx)(f.a,{children:w})]}),Object(c.jsxs)(j.a,{className:"p-2",children:[Object(c.jsx)(_,{}),Object(c.jsx)(ee,{})]})]})}),Object(c.jsxs)(m.a,{item:!0,xs:12,sm:12,md:6,lg:8,xl:8,children:[Object(c.jsx)("video",{ref:G,style:{position:"fixed",top:280,left:10,zIndex:9e3},width:te(),height:ne(),autoPlay:!0,muted:!0,playsInline:!0}),Object(c.jsx)("canvas",{ref:H,style:{position:"fixed",top:280,left:10,zIndex:10001},width:te(),height:ne()})]})]})}))},332:function(e,t){},333:function(e,t){},335:function(e,t){},336:function(e,t){},377:function(e,t){},396:function(e,t){},397:function(e,t){}}]);
//# sourceMappingURL=3.5a903524.chunk.js.map