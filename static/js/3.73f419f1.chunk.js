(this["webpackJsonpmachinelearning-tensorflow"]=this["webpackJsonpmachinelearning-tensorflow"]||[]).push([[3],{100:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(22),i=n.n(a),r=n(36),o=n(57),s=n(0),u=n(275),l=(n(521),n(520),n(506)),f=n(539),j=n(328),d=n(325),b=n(327),m=n(326),h=n(162),O=n(167),x=n(71);t.default=Object(O.a)()((function(e){var t=Object(s.useState)({}),n=Object(o.a)(t,2),a=n[0],p=n[1],v=Object(s.useState)(""),g=Object(o.a)(v,2),w=g[0],S=g[1],y=Object(s.useState)(),k=Object(o.a)(y,2),C=k[0],D=k[1],M=Object(s.useState)(!1),N=Object(o.a)(M,2),R=N[0],E=N[1],F=Object(s.useState)(!1),I=Object(o.a)(F,2),T=I[0],U=I[1],z=Object(s.useState)(!1),J=Object(o.a)(z,2),L=J[0],P=J[1],W=Object(s.useState)("environment"),q=Object(o.a)(W,2),A=q[0],B=q[1],G=Object(s.useRef)(null),H=Object(s.useRef)(null),K=Object(x.a)();Object(s.useEffect)((function(){function e(){return(e=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K.getUserLocale(),e.next=3,K.getLocalizedTextSet(["objectdetectioncamera","objectdetectiondescriptioncamera","objectdetectioninstructionscamera","moreinfo"],t);case 3:n=e.sent,p(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){u.f().then((function(){S("Model loading..."),V().then((function(){S("Model loaded..."),Q()}))}))}),[]),Object(s.useEffect)((function(){!0===L&&X(C,G.current,L)}),[L]);var Q=function(){if(navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia)return S("Initializing web cam..."),navigator.mediaDevices.getUserMedia({video:{facingMode:A},audio:!1}).then((function(e){return window.stream=e,G.current.srcObject=e,new Promise((function(e){G.current.onloadedmetadata=function(){S('Click "Start Object Detection" to continue'),U(!0),e()}}))}),(function(e){S("Couldn\t start the webcam"),console.error(e)}))},V=function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.load();case 3:t=e.sent,D(t),E(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),S("Couldn\t load the model"),E(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),X=function e(t,n){t.detect(n).then((function(c){n.srcObject&&(Y(c),requestAnimationFrame((function(){e(t,n)})))}),(function(e){S("Couldn\t start the webcam"),U(!1),console.error(e)}))},Y=function(e){var t=H.current.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height);var n="20px monospace",c="#00e5ff";t.font=n,t.textBaseline="top",e.forEach((function(e){var a=e.bbox[0],i=e.bbox[1],r=e.bbox[2],o=e.bbox[3];t.strokeStyle=c,t.lineWidth=1,t.strokeRect(a,i,r,o),t.fillStyle=c;var s=t.measureText(e.class).width,u=parseInt(n,10);t.fillRect(a,i,s+10,u+10),t.fillRect(a,i+o-u,s+15,u+10),t.fillStyle="#000000",t.fillText(e.class,a,i),t.fillText(e.score.toFixed(2),a,i+o-u)}))},Z=function(){$(!0),P(!0),S("Detecting objects...")},$=function(e){return navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(t){t.getTracks().forEach((function(t){e?(t.start&&t.start(),G.current.play()):(t.stop&&t.stop(),G.current.pause())}))}))},_=function(){return R&&T&&!L?Object(c.jsx)(j.a,{color:"primary",onClick:function(){Z()},children:"Start Object Detection"}):R&&T&&L?Object(c.jsx)(j.a,{color:"primary",className:"p-2",onClick:function(){return P(!1),$(!1),void S("Stopped detecting objects...")},children:"Stop Detection"}):Object(c.jsx)(c.Fragment,{})},ee=function(){return R&&T&&L?Object(c.jsx)(j.a,{color:"primary",className:"p-2",onClick:function(){B("environment"===A?"user":"environment")},children:"Change Camera"}):Object(c.jsx)(c.Fragment,{})},te=function(){return Object(O.b)("md",e.width)?720:window.innerWidth-40},ne=function(){var e=te();return Math.ceil(.75*e)},ce=function(){return R||T?Object(c.jsx)(c.Fragment,{}):Object(c.jsx)("div",{className:"pb-2",children:a.objectdetectioninstructionscamera})},ae=function(e){var t=e.messages;return Object(c.jsx)(f.a,{children:t})};return Object(c.jsxs)(h.a,{container:!0,spacing:0,children:[Object(c.jsx)(h.a,{item:!0,xs:12,sm:12,md:6,lg:4,xl:4,children:Object(c.jsxs)(d.a,{className:"card white-bg-color",elevation:0,children:[Object(c.jsxs)(m.a,{className:"p-1",children:[Object(c.jsx)("h2",{children:a.objectdetectioncamera}),Object(c.jsx)(ce,{}),Object(c.jsx)(ae,{messages:w})]}),Object(c.jsxs)(b.a,{className:"p-1",children:[Object(c.jsx)(_,{}),Object(c.jsx)(ee,{})]})]})}),Object(c.jsxs)(h.a,{item:!0,xs:12,sm:12,md:6,lg:8,xl:8,children:[Object(c.jsx)("video",{ref:G,style:{position:"fixed",top:240,left:20,zIndex:6e3},width:te(),height:ne(),autoPlay:!0,muted:!0,playsInline:!0}),Object(c.jsx)("canvas",{ref:H,style:{position:"fixed",top:240,left:20,zIndex:7e3},width:te(),height:ne()})]})]})}))},332:function(e,t){},333:function(e,t){},335:function(e,t){},336:function(e,t){},377:function(e,t){},396:function(e,t){},397:function(e,t){}}]);
//# sourceMappingURL=3.73f419f1.chunk.js.map