(this["webpackJsonpmachinelearning-tensorflow"]=this["webpackJsonpmachinelearning-tensorflow"]||[]).push([[3],{332:function(e,t){},333:function(e,t){},335:function(e,t){},336:function(e,t){},377:function(e,t){},396:function(e,t){},397:function(e,t){},99:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(22),r=n.n(a),i=n(36),o=n(57),s=n(0),u=n(275),l=(n(521),n(520),n(506)),f=n(328),b=n(325),d=n(327),j=n(326),h=n(162),p=n(166),m=n(71);t.default=Object(p.a)()((function(e){var t=Object(s.useState)({}),n=Object(o.a)(t,2),a=n[0],O=n[1],x=Object(s.useState)(""),v=Object(o.a)(x,2),w=v[0],g=v[1],y=Object(s.useState)(),k=Object(o.a)(y,2),S=k[0],C=k[1],D=Object(s.useState)(!1),R=Object(o.a)(D,2),M=R[0],F=R[1],N=Object(s.useState)(!1),P=Object(o.a)(N,2),T=P[0],U=P[1],E=Object(s.useState)(700),I=Object(o.a)(E,2),z=I[0],J=I[1],L=Object(s.useState)(600),W=Object(o.a)(L,2),q=W[0],A=W[1],B=Object(s.useRef)(null),G=Object(s.useRef)(null),H={position:"fixed",top:250,left:20},K=Object(m.a)();Object(s.useEffect)((function(){function e(){return(e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K.getUserLocale(),e.next=3,K.getLocalizedTextSet(["objectdetectioncamera","objectdetectiondescriptioncamera","objectdetectioninstructionscamera","moreinfo"],t);case 3:n=e.sent,O(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){u.f().then((function(){g("Model loading..."),V().then((function(){F(!0),g("Model loaded..."),Q()}))}))}),[]);var Q=function(){if(navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia)return g("Initializing web cam..."),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){return window.stream=e,B.current.srcObject=e,new Promise((function(e){B.current.onloadedmetadata=function(){g('Camera ready...click "Perform Object Detection" to continue'),U(!0),Y(),e()}}))}),(function(e){g("Couldn\t start the webcam"),console.error(e)}))},V=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.load();case 3:t=e.sent,C(t),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),g("Couldn\t load the model"),F(!1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),X=function e(t,n){t.detect(n).then((function(c){Z(c),requestAnimationFrame((function(){e(t,n)}))}),(function(e){g("Couldn\t start the webcam"),U(!1),console.error(e)}))},Y=function(){var t=720,n=600;Object(p.b)("sm",e.width)?t=B.current?B.current.width:700:n=t=window.innerWidth-40,J(t),A(n)},Z=function(e){var t=G.current.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height);var n="20px monospace",c="#00e5ff";t.font=n,t.textBaseline="top",e.forEach((function(e){var a=e.bbox[0],r=e.bbox[1],i=e.bbox[2],o=e.bbox[3];t.strokeStyle=c,t.lineWidth=1,t.strokeRect(a,r,i,o),t.fillStyle=c;var s=t.measureText(e.class).width,u=parseInt(n,10);t.fillRect(a,r,s+10,u+10),t.fillRect(a,r+o-u,s+15,u+10),t.fillStyle="#000000",t.fillText(e.class,a,r),t.fillText(e.score.toFixed(2),a,r+o-u)}))},$=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(),X(S,B.current),g("Detecting objects in the webcam...");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)(h.a,{container:!0,spacing:0,children:Object(c.jsxs)(h.a,{item:!0,xs:12,className:"contentpanel-site mb-3",children:[Object(c.jsx)("h3",{children:a.objectdetectioncamera}),Object(c.jsxs)(b.a,{className:"card white-bg-color bl-1 bb-1",children:[Object(c.jsxs)(j.a,{className:"p-2",children:[M||T?Object(c.jsx)(c.Fragment,{}):Object(c.jsx)("p",{children:a.objectdetectioninstructionscamera}),Object(c.jsx)("p",{children:w})]}),Object(c.jsx)(d.a,{className:"p-2",children:M&&T?Object(c.jsx)(f.a,{color:"primary",onClick:function(){return $()},children:"Perform Object Detection"}):Object(c.jsx)(c.Fragment,{})})]}),Object(c.jsx)("video",{style:H,width:z,height:q,autoPlay:!0,muted:!0,playsInline:!0,ref:B}),Object(c.jsx)("canvas",{style:H,ref:G,width:z,height:q+50})]})})}))}}]);
//# sourceMappingURL=3.1e3786fa.chunk.js.map